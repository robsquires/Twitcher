<?php

namespace Twitcher\Entity\Repositories;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Query;

/**
 * BirdRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BirdRepository extends EntityRepository
{




    public function findByWildcardNames($name)
    {
        $dql = <<<DQL
                SELECT bird
                FROM \Twitcher\Entity\Bird bird index by bird.id
                WHERE bird.firstName LIKE '%$name%'
                OR bird.lastName LIKE '%$name%'
DQL;

        $query =  $this->getEntityManager()->createQuery($dql);
        $result = $query->getResult(Query::HYDRATE_ARRAY);

        $ids = array_keys($result);

        return $ids;
    }

    public function findByLatinName($name)
    {
        $dql = <<<DQL
                SELECT bird
                FROM \Twitcher\Entity\Bird bird index by bird.id
                WHERE bird.latinName = '$name'
                OR bird.lastName LIKE '%$name%'
DQL;

        $query =  $this->getEntityManager()->createQuery($dql);
        $result = $query->getResult(Query::HYDRATE_ARRAY);

        $ids = array_keys($result);

        return $ids;
    }


   
}